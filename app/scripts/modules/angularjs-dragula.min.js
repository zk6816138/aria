(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var n;if(typeof window!=="undefined"){n=window}else if(typeof global!=="undefined"){n=global}else if(typeof self!=="undefined"){n=self}else{n=this}n.angularDragula=e()}})(function(){var e,n,r;return function o(a,u,f){function c(r,e){if(!u[r]){if(!a[r]){var n=typeof require=="function"&&require;if(!e&&n)return n(r,!0);if(l)return l(r,!0);var t=new Error("Cannot find module '"+r+"'");throw t.code="MODULE_NOT_FOUND",t}var i=u[r]={exports:{}};a[r][0].call(i.exports,function(e){var n=a[r][1][e];return c(n?n:e)},i,i.exports,o,a,u,f)}return u[r].exports}var l=typeof require=="function"&&require;for(var e=0;e<f.length;e++)c(f[e]);return c}({1:[function(e,n,r){"use strict";var t=e("./service");var i=e("./directive");function o(e){var n=e.module("dragula",["ng"]);n.factory("dragulaService",t(e));n.directive("dragula",i(e));return"dragula"}n.exports=o},{"./directive":2,"./service":13}],2:[function(e,n,r){"use strict";var c=e("dragula");function t(e){return["dragulaService",function e(f){return{restrict:"A",scope:{dragulaScope:"=",dragulaModel:"="},link:n};function n(e,n,r){var t=e.dragulaScope||e.$parent;var i=n[0];var o=e.$eval(r.dragula);var a;var u=f.find(t,o);if(u){a=u.drake;a.containers.push(i)}else{a=c({containers:[i]});f.add(t,o,a)}e.$watch("dragulaModel",function(e,n){if(!e){return}if(a.models){var r=n?a.models.indexOf(n):-1;if(r>=0){a.models.splice(r,1,e)}else{a.models.push(e)}}else{a.models=[e]}f.handleModels(t,a)})}}]}n.exports=t},{dragula:10}],3:[function(e,n,r){n.exports=function e(n,r){return Array.prototype.slice.call(n,r)}},{}],4:[function(e,n,r){"use strict";var i=e("ticky");n.exports=function e(n,r,t){if(!n){return}i(function e(){n.apply(t||null,r||[])})}},{ticky:11}],5:[function(e,n,r){"use strict";var f=e("atoa");var c=e("./debounce");n.exports=function e(o,n){var a=n||{};var u={};if(o===undefined){o={}}o.on=function(e,n){if(!u[e]){u[e]=[n]}else{u[e].push(n)}return o};o.once=function(e,n){n._once=true;o.on(e,n);return o};o.off=function(e,n){var r=arguments.length;if(r===1){delete u[e]}else if(r===0){u={}}else{var t=u[e];if(!t){return o}t.splice(t.indexOf(n),1)}return o};o.emit=function(){var e=f(arguments);return o.emitterSnapshot(e.shift()).apply(this,e)};o.emitterSnapshot=function(i){var e=(u[i]||[]).slice(0);return function(){var r=f(arguments);var t=this||o;if(i==="error"&&a.throws!==false&&!e.length){throw r.length===1?r[0]:r}e.forEach(function e(n){if(a.async){c(n,r,t)}else{n.apply(t,r)}if(n._once){o.off(i,n)}});return o}};return o}},{"./debounce":4,atoa:3}],6:[function(g,h,e){(function(o){"use strict";var a=g("custom-event");var u=g("./eventmap");var f=o.document;var e=r;var n=i;var c=[];if(!o.addEventListener){e=t;n=l}h.exports={add:e,remove:n,fabricate:s};function r(e,n,r,t){return e.addEventListener(n,r,t)}function t(e,n,r){return e.attachEvent("on"+n,d(e,n,r))}function i(e,n,r,t){return e.removeEventListener(n,r,t)}function l(e,n,r){var t=p(e,n,r);if(t){return e.detachEvent("on"+n,t)}}function s(e,n,r){var t=u.indexOf(n)===-1?o():i();if(e.dispatchEvent){e.dispatchEvent(t)}else{e.fireEvent("on"+n,t)}function i(){var e;if(f.createEvent){e=f.createEvent("Event");e.initEvent(n,true,true)}else if(f.createEventObject){e=f.createEventObject()}return e}function o(){return new a(n,{detail:r})}}function v(t,e,i){return function e(n){var r=n||o.event;r.target=r.target||r.srcElement;r.preventDefault=r.preventDefault||function e(){r.returnValue=false};r.stopPropagation=r.stopPropagation||function e(){r.cancelBubble=true};r.which=r.which||r.keyCode;i.call(t,r)}}function d(e,n,r){var t=p(e,n,r)||v(e,n,r);c.push({wrapper:t,element:e,type:n,fn:r});return t}function p(e,n,r){var t=m(e,n,r);if(t){var i=c[t].wrapper;c.splice(t,1);return i}}function m(e,n,r){var t,i;for(t=0;t<c.length;t++){i=c[t];if(i.element===e&&i.type===n&&i.fn===r){return t}}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./eventmap":7,"custom-event":8}],7:[function(e,i,n){(function(e){"use strict";var n=[];var r="";var t=/^on/;for(r in e){if(t.test(r)){n.push(r.slice(2))}}i.exports=n}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],8:[function(e,t,n){(function(e){var n=e.CustomEvent;function r(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return false}t.exports=r()?n:"function"===typeof document.createEvent?function e(n,r){var t=document.createEvent("CustomEvent");if(r){t.initCustomEvent(n,r.bubbles,r.cancelable,r.detail)}else{t.initCustomEvent(n,false,false,void 0)}return t}:function e(n,r){var t=document.createEventObject();t.type=n;if(r){t.bubbles=Boolean(r.bubbles);t.cancelable=Boolean(r.cancelable);t.detail=r.detail}else{t.bubbles=false;t.cancelable=false;t.detail=void 0}return t}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],9:[function(e,n,r){"use strict";var t={};var i="(?:^|\\s)";var o="(?:\\s|$)";function a(e){var n=t[e];if(n){n.lastIndex=0}else{t[e]=n=new RegExp(i+e+o,"g")}return n}function u(e,n){var r=e.className;if(!r.length){e.className=n}else if(!a(n).test(r)){e.className+=" "+n}}function f(e,n){e.className=e.className.replace(a(n)," ").trim()}n.exports={add:u,rm:f}},{}],10:[function(t,o,e){(function(u){"use strict";var G=t("contra/emitter");var J=t("crossvent");var Q=t("./classes");var W=document;var Z=W.documentElement;function e(e,n){var r=arguments.length;if(r===1&&Array.isArray(e)===false){n=e;e=[]}var m;var g;var h;var y;var b;var a;var u;var w;var x;var E;var t;var S=null;var f;var C;var O=n||{};if(O.moves===void 0){O.moves=oe}if(O.accepts===void 0){O.accepts=oe}if(O.invalid===void 0){O.invalid=B}if(O.containers===void 0){O.containers=e||[]}if(O.isContainer===void 0){O.isContainer=ie}if(O.copy===void 0){O.copy=false}if(O.copySortSource===void 0){O.copySortSource=false}if(O.revertOnSpill===void 0){O.revertOnSpill=false}if(O.removeOnSpill===void 0){O.removeOnSpill=false}if(O.direction===void 0){O.direction="vertical"}if(O.ignoreInputTextSelection===void 0){O.ignoreInputTextSelection=true}if(O.mirrorContainer===void 0){O.mirrorContainer=W.body}if(O.canMoveX===void 0){O.canMoveX=true}if(O.canMoveY===void 0){O.canMoveY=true}var N=G({containers:O.containers,start:X,end:k,cancel:I,remove:$,destroy:o,canMove:M,dragging:false});if(O.removeOnSpill===true){N.on("over",U).on("out",_)}i();return N;function c(e){return N.containers.indexOf(e)!==-1||O.isContainer(e)}function i(e){var n=e?"remove":"add";ee(Z,n,"mousedown",d);ee(Z,n,"mouseup",D)}function l(e){var n=e?"remove":"add";ee(Z,n,"mousemove",p)}function s(e){var n=e?"remove":"add";J[n](Z,"selectstart",v);J[n](Z,"click",v)}function o(){i(true);D({})}function v(e){if(f){e.preventDefault()}}function d(e){a=e.clientX;u=e.clientY;var n=ne(e)!==1||e.metaKey||e.ctrlKey;if(n){return}var r=e.target;var t=T(r);if(!t){return}f=t;var i=t.item.getBoundingClientRect();C={x:i.x,y:i.y};l();if(e.type==="mousedown"){if(ce(r)){r.focus()}else{e.preventDefault()}}}function p(e){if(!f){return}if(ne(e)===0){D({});return}if(e.clientX!==void 0&&e.clientX===a&&e.clientY!==void 0&&e.clientY===u){return}if(O.ignoreInputTextSelection){var n=se("clientX",e);var r=se("clientY",e);var t=W.elementFromPoint(n,r);if(ce(t)){return}}var i=f;l(true);s();k();Y(i);var o=re(h);y=se("pageX",e)-o.left;b=se("pageY",e)-o.top;Q.add(E||h,"gu-transit");F();q(e)}function T(e){if(N.dragging&&m){return}if(c(e)){return}var n=e;while(fe(e)&&c(fe(e))===false){if(O.invalid(e,n)){return}e=fe(e);if(!e){return}}var r=fe(e);if(!r){return}if(O.invalid(e,n)){return}var t=O.moves(e,r,n,le(e));if(!t){return}return{item:e,source:r}}function M(e){return!!T(e)}function X(e){var n=T(e);if(n){Y(n)}}function Y(e){if(V(e.item,e.source)){E=e.item.cloneNode(true);N.emit("cloned",E,e.item,"copy")}g=e.source;h=e.item;w=x=le(e.item);N.dragging=true;N.emit("drag",h,g)}function B(){return false}function k(){if(!N.dragging){return}var e=E||h;P(e,fe(e))}function A(){f=false;l(true);s(true)}function D(e){A();if(!N.dragging){return}var n=E||h;var r=se("clientX",e);var t=se("clientY",e);var i=te(m,r,t);var o=j(i,r,t);if(o&&(E&&O.copySortSource||(!E||o!==g))){P(n,o)}else if(O.removeOnSpill){$()}else{I()}}function P(e,n){var r=fe(e);if(E&&O.copySortSource&&n===g){r.removeChild(h)}if(L(n)){N.emit("cancel",e,g,g)}else{N.emit("drop",e,n,g,x)}R()}function $(){if(!N.dragging){return}var e=E||h;var n=fe(e);if(n){n.removeChild(e)}N.emit(E?"cancel":"remove",e,n,g);R()}function I(e){if(!N.dragging){return}var n=arguments.length>0?e:O.revertOnSpill;var r=E||h;var t=fe(r);var i=L(t);if(i===false&&n){if(E){if(t){t.removeChild(E)}}else{g.insertBefore(r,w)}}if(i||n){N.emit("cancel",r,g,g)}else{N.emit("drop",r,t,g,x)}R()}function R(){var e=E||h;A();K();if(e){Q.rm(e,"gu-transit")}if(t){clearTimeout(t)}N.dragging=false;if(S){N.emit("out",e,S,g)}N.emit("dragend",e);g=h=E=w=x=t=S=null}function L(e,n){var r;if(n!==void 0){r=n}else if(m){r=x}else{r=le(E||h)}return e===g&&r===w}function j(i,o,a){var u=i;while(u&&!e()){u=fe(u)}return u;function e(){var e=c(u);if(e===false){return false}var n=z(u,i);var r=H(u,n,o,a);var t=L(u,r);if(t){return true}return O.accepts(h,u,g,r)}}function q(e){if(!m){return}e.preventDefault();var n=se("clientX",e);var r=se("clientY",e);var t=n-y;var i=r-b;m.style.left=O.canMoveX?t+"px":C.x+"px";m.style.top=O.canMoveY?i+"px":C.y+"px";var o=E||h;var a=te(m,n,r);var u=j(a,n,r);var f=u!==null&&u!==S;if(f||u===null){p();S=u;d()}var c=fe(o);if(u===g&&E&&!O.copySortSource){if(c){c.removeChild(o)}return}var l;var s=z(u,a);if(s!==null){l=H(u,s,n,r)}else if(O.revertOnSpill===true&&!E){l=w;u=g}else{if(E&&c){c.removeChild(o)}return}if(l===null&&f||l!==o&&l!==le(o)){x=l;u.insertBefore(o,l);N.emit("shadow",o,u,g)}function v(e){N.emit(e,o,S,g)}function d(){if(f){v("over")}}function p(){if(S){v("out")}}}function U(e){Q.rm(e,"gu-hide")}function _(e){if(N.dragging){Q.add(e,"gu-hide")}}function F(){if(m){return}var e=h.getBoundingClientRect();m=h.cloneNode(true);m.style.width=ae(e)+"px";m.style.height=ue(e)+"px";Q.rm(m,"gu-transit");Q.add(m,"gu-mirror");O.mirrorContainer.appendChild(m);ee(Z,"add","mousemove",q);Q.add(O.mirrorContainer,"gu-unselectable");N.emit("cloned",m,h,"mirror")}function K(){if(m){Q.rm(O.mirrorContainer,"gu-unselectable");ee(Z,"remove","mousemove",q);fe(m).removeChild(m);m=null}}function z(e,n){var r=n;while(r!==e&&fe(r)!==e){r=fe(r)}if(r===Z){return null}return r}function H(i,n,o,a){var u=O.direction==="horizontal";var e=n!==i?t():r();return e;function r(){var e=i.children.length;var n;var r;var t;for(n=0;n<e;n++){r=i.children[n];t=r.getBoundingClientRect();if(u&&t.left+t.width/2>o){return r}if(!u&&t.top+t.height/2>a){return r}}return null}function t(){var e=n.getBoundingClientRect();if(u){return f(o>e.left+ae(e)/2)}return f(a>e.top+ue(e)/2)}function f(e){return e?le(n):n}}function V(e,n){return typeof O.copy==="boolean"?O.copy:O.copy(e,n)}}function ee(e,n,r,t){var i={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"};var o={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"};var a={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};if(u.navigator.pointerEnabled){J[n](e,o[r],t)}else if(u.navigator.msPointerEnabled){J[n](e,a[r],t)}else{J[n](e,i[r],t);J[n](e,r,t)}}function ne(e){if(e.touches!==void 0){return e.touches.length}if(e.which!==void 0&&e.which!==0){return e.which}if(e.buttons!==void 0){return e.buttons}var n=e.button;if(n!==void 0){return n&1?1:n&2?3:n&4?2:0}}function re(e){var n=e.getBoundingClientRect();return{left:n.left+r("scrollLeft","pageXOffset"),top:n.top+r("scrollTop","pageYOffset")}}function r(e,n){if(typeof u[n]!=="undefined"){return u[n]}if(Z.clientHeight){return Z[e]}return W.body[e]}function te(e,n,r){var t=e||{};var i=t.className;var o;t.className+=" gu-hide";o=W.elementFromPoint(n,r);t.className=i;return o}function ie(){return false}function oe(){return true}function ae(e){return e.width||e.right-e.left}function ue(e){return e.height||e.bottom-e.top}function fe(e){return e.parentNode===W?null:e.parentNode}function ce(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.tagName==="SELECT"||n(e)}function n(e){if(!e){return false}if(e.contentEditable==="false"){return false}if(e.contentEditable==="true"){return true}return n(fe(e))}function le(n){return n.nextElementSibling||e();function e(){var e=n;do{e=e.nextSibling}while(e&&e.nodeType!==1);return e}}function i(e){if(e.targetTouches&&e.targetTouches.length){return e.targetTouches[0]}if(e.changedTouches&&e.changedTouches.length){return e.changedTouches[0]}return e}function se(e,n){var r=i(n);var t={pageX:"clientX",pageY:"clientY"};if(e in t&&!(e in r)&&t[e]in r){e=t[e]}return r[e]}o.exports=e}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./classes":9,"contra/emitter":5,crossvent:6}],11:[function(e,n,r){var t=typeof setImmediate==="function",i;if(t){i=function(e){setImmediate(e)}}else{i=function(e){setTimeout(e,0)}}n.exports=i},{}],12:[function(e,n,r){"use strict";var o=e("atoa");var a=["cancel","cloned","drag","dragend","drop","out","over","remove","shadow","drop-model","remove-model"];function t(n,r,t){a.forEach(e);function e(n){r.drake.on(n,e);function e(){var e=o(arguments).map(i);e.unshift(r.name+"."+n);t.$emit.apply(t,e)}}function i(e){if(n.isElement(e)){return n.element(e)}return e}}n.exports=t},{atoa:3}],13:[function(e,n,r){"use strict";var f=e("dragula");var t="$$dragula";var c=e("./replicate-events");function i(d){return[function e(){return{add:i,find:u,options:r,destroy:n,handleModels:o};function o(t,u){if(u.registered){return}var f;var c;var l;var s;u.on("remove",function e(n,r){if(!u.models){return}s=u.models[u.containers.indexOf(r)];t.$applyAsync(function e(){s.splice(c,1);u.emit("remove-model",n,r)})});u.on("drag",function e(n,r){f=n;c=v(n,r)});u.on("drop",function e(i,o,a){if(!u.models){return}l=v(i,o);t.$applyAsync(function e(){s=u.models[u.containers.indexOf(a)];if(o===a){s.splice(l,0,s.splice(c,1)[0])}else{var n=f===i;var r=u.models[u.containers.indexOf(o)];var t=n?s[c]:d.copy(s[c]);if(n){s.splice(c,1)}r.splice(l,0,t);o.removeChild(i)}u.emit("drop-model",i,o,a)})});u.registered=true}function a(e){var n=e[t];if(!n){n=e[t]={bags:[]}}return n}function v(e,n){return Array.prototype.indexOf.call(d.element(n).children(),e)}function i(e,n,r){var t=u(e,n);if(t){throw new Error('Bag named: "'+n+'" already exists in same angular scope.')}var i=a(e);t={name:n,drake:r};i.bags.push(t);c(d,t,e);if(r.models){o(e,r)}return t}function u(e,n){var r=a(e).bags;for(var t=0;t<r.length;t++){if(r[t].name===n){return r[t]}}}function n(e,n){var r=a(e).bags;var t=u(e,n);var i=r.indexOf(t);r.splice(i,1);t.drake.destroy()}function r(e,n,r){var t=i(e,n,f(r));o(e,t.drake)}}]}n.exports=i},{"./replicate-events":12,dragula:10}]},{},[1])(1)});