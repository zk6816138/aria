(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var n;if(typeof window!=="undefined"){n=window}else if(typeof global!=="undefined"){n=global}else if(typeof self!=="undefined"){n=self}else{n=this}n.angularDragula=e()}})(function(){var e,n,r;return function o(a,u,f){function c(r,e){if(!u[r]){if(!a[r]){var n=typeof require=="function"&&require;if(!e&&n)return n(r,!0);if(l)return l(r,!0);var t=new Error("Cannot find module '"+r+"'");throw t.code="MODULE_NOT_FOUND",t}var i=u[r]={exports:{}};a[r][0].call(i.exports,function(e){var n=a[r][1][e];return c(n?n:e)},i,i.exports,o,a,u,f)}return u[r].exports}var l=typeof require=="function"&&require;for(var e=0;e<f.length;e++)c(f[e]);return c}({1:[function(e,n,r){"use strict";var t=e("./service");var i=e("./directive");function o(e){var n=e.module("dragula",["ng"]);n.factory("dragulaService",t(e));n.directive("dragula",i(e));return"dragula"}n.exports=o},{"./directive":2,"./service":13}],2:[function(e,n,r){"use strict";var c=e("dragula");function t(e){return["dragulaService",function e(f){return{restrict:"A",scope:{dragulaScope:"=",dragulaModel:"="},link:n};function n(e,n,r){var t=e.dragulaScope||e.$parent;var i=n[0];var o=e.$eval(r.dragula);var a;var u=f.find(t,o);if(u){a=u.drake;a.containers.push(i)}else{a=c({containers:[i]});f.add(t,o,a)}e.$watch("dragulaModel",function(e,n){if(!e){return}if(a.models){var r=n?a.models.indexOf(n):-1;if(r>=0){a.models.splice(r,1,e)}else{a.models.push(e)}}else{a.models=[e]}f.handleModels(t,a)})}}]}n.exports=t},{dragula:10}],3:[function(e,n,r){n.exports=function e(n,r){return Array.prototype.slice.call(n,r)}},{}],4:[function(e,n,r){"use strict";var i=e("ticky");n.exports=function e(n,r,t){if(!n){return}i(function e(){n.apply(t||null,r||[])})}},{ticky:11}],5:[function(e,n,r){"use strict";var f=e("atoa");var c=e("./debounce");n.exports=function e(o,n){var a=n||{};var u={};if(o===undefined){o={}}o.on=function(e,n){if(!u[e]){u[e]=[n]}else{u[e].push(n)}return o};o.once=function(e,n){n._once=true;o.on(e,n);return o};o.off=function(e,n){var r=arguments.length;if(r===1){delete u[e]}else if(r===0){u={}}else{var t=u[e];if(!t){return o}t.splice(t.indexOf(n),1)}return o};o.emit=function(){var e=f(arguments);return o.emitterSnapshot(e.shift()).apply(this,e)};o.emitterSnapshot=function(i){var e=(u[i]||[]).slice(0);return function(){var r=f(arguments);var t=this||o;if(i==="error"&&a.throws!==false&&!e.length){throw r.length===1?r[0]:r}e.forEach(function e(n){if(a.async){c(n,r,t)}else{n.apply(t,r)}if(n._once){o.off(i,n)}});return o}};return o}},{"./debounce":4,atoa:3}],6:[function(g,h,e){(function(o){"use strict";var a=g("custom-event");var u=g("./eventmap");var f=o.document;var e=r;var n=i;var c=[];if(!o.addEventListener){e=t;n=l}h.exports={add:e,remove:n,fabricate:s};function r(e,n,r,t){return e.addEventListener(n,r,t)}function t(e,n,r){return e.attachEvent("on"+n,d(e,n,r))}function i(e,n,r,t){return e.removeEventListener(n,r,t)}function l(e,n,r){var t=p(e,n,r);if(t){return e.detachEvent("on"+n,t)}}function s(e,n,r){var t=u.indexOf(n)===-1?o():i();if(e.dispatchEvent){e.dispatchEvent(t)}else{e.fireEvent("on"+n,t)}function i(){var e;if(f.createEvent){e=f.createEvent("Event");e.initEvent(n,true,true)}else if(f.createEventObject){e=f.createEventObject()}return e}function o(){return new a(n,{detail:r})}}function v(t,e,i){return function e(n){var r=n||o.event;r.target=r.target||r.srcElement;r.preventDefault=r.preventDefault||function e(){r.returnValue=false};r.stopPropagation=r.stopPropagation||function e(){r.cancelBubble=true};r.which=r.which||r.keyCode;i.call(t,r)}}function d(e,n,r){var t=p(e,n,r)||v(e,n,r);c.push({wrapper:t,element:e,type:n,fn:r});return t}function p(e,n,r){var t=m(e,n,r);if(t){var i=c[t].wrapper;c.splice(t,1);return i}}function m(e,n,r){var t,i;for(t=0;t<c.length;t++){i=c[t];if(i.element===e&&i.type===n&&i.fn===r){return t}}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./eventmap":7,"custom-event":8}],7:[function(e,i,n){(function(e){"use strict";var n=[];var r="";var t=/^on/;for(r in e){if(t.test(r)){n.push(r.slice(2))}}i.exports=n}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],8:[function(e,t,n){(function(e){var n=e.CustomEvent;function r(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return false}t.exports=r()?n:"function"===typeof document.createEvent?function e(n,r){var t=document.createEvent("CustomEvent");if(r){t.initCustomEvent(n,r.bubbles,r.cancelable,r.detail)}else{t.initCustomEvent(n,false,false,void 0)}return t}:function e(n,r){var t=document.createEventObject();t.type=n;if(r){t.bubbles=Boolean(r.bubbles);t.cancelable=Boolean(r.cancelable);t.detail=r.detail}else{t.bubbles=false;t.cancelable=false;t.detail=void 0}return t}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],9:[function(e,n,r){"use strict";var t={};var i="(?:^|\\s)";var o="(?:\\s|$)";function a(e){var n=t[e];if(n){n.lastIndex=0}else{t[e]=n=new RegExp(i+e+o,"g")}return n}function u(e,n){var r=e.className;if(!r.length){e.className=n}else if(!a(n).test(r)){e.className+=" "+n}}function f(e,n){e.className=e.className.replace(a(n)," ").trim()}n.exports={add:u,rm:f}},{}],10:[function(t,o,e){(function(u){"use strict";var V=t("contra/emitter");var G=t("crossvent");var J=t("./classes");var Q=document;var W=Q.documentElement;function e(e,n){var r=arguments.length;if(r===1&&Array.isArray(e)===false){n=e;e=[]}var m;var g;var h;var y;var b;var a;var u;var w;var x;var E;var t;var S=null;var f;var C=n||{};if(C.moves===void 0){C.moves=ie}if(C.accepts===void 0){C.accepts=ie}if(C.invalid===void 0){C.invalid=B}if(C.containers===void 0){C.containers=e||[]}if(C.isContainer===void 0){C.isContainer=te}if(C.copy===void 0){C.copy=false}if(C.copySortSource===void 0){C.copySortSource=false}if(C.revertOnSpill===void 0){C.revertOnSpill=false}if(C.removeOnSpill===void 0){C.removeOnSpill=false}if(C.direction===void 0){C.direction="vertical"}if(C.ignoreInputTextSelection===void 0){C.ignoreInputTextSelection=true}if(C.mirrorContainer===void 0){C.mirrorContainer=Q.body}var O=V({containers:C.containers,start:X,end:M,cancel:$,remove:P,destroy:o,canMove:T,dragging:false});if(C.removeOnSpill===true){O.on("over",q).on("out",U)}i();return O;function c(e){return O.containers.indexOf(e)!==-1||C.isContainer(e)}function i(e){var n=e?"remove":"add";Z(W,n,"mousedown",d);Z(W,n,"mouseup",A)}function l(e){var n=e?"remove":"add";Z(W,n,"mousemove",p)}function s(e){var n=e?"remove":"add";G[n](W,"selectstart",v);G[n](W,"click",v)}function o(){i(true);A({})}function v(e){if(f){e.preventDefault()}}function d(e){a=e.clientX;u=e.clientY;var n=ee(e)!==1||e.metaKey||e.ctrlKey;if(n){return}var r=e.target;var t=N(r);if(!t){return}f=t;l();if(e.type==="mousedown"){if(fe(r)){r.focus()}else{e.preventDefault()}}}function p(e){if(!f){return}if(ee(e)===0){A({});return}if(e.clientX!==void 0&&e.clientX===a&&e.clientY!==void 0&&e.clientY===u){return}if(C.ignoreInputTextSelection){var n=le("clientX",e);var r=le("clientY",e);var t=Q.elementFromPoint(n,r);if(fe(t)){return}}var i=f;l(true);s();M();k(i);var o=ne(h);y=le("pageX",e)-o.left;b=le("pageY",e)-o.top;J.add(E||h,"gu-transit");_();j(e)}function N(e){if(O.dragging&&m){return}if(c(e)){return}var n=e;while(ue(e)&&c(ue(e))===false){if(C.invalid(e,n)){return}e=ue(e);if(!e){return}}var r=ue(e);if(!r){return}if(C.invalid(e,n)){return}var t=C.moves(e,r,n,ce(e));if(!t){return}return{item:e,source:r}}function T(e){return!!N(e)}function X(e){var n=N(e);if(n){k(n)}}function k(e){if(H(e.item,e.source)){E=e.item.cloneNode(true);O.emit("cloned",E,e.item,"copy")}g=e.source;h=e.item;w=x=ce(e.item);O.dragging=true;O.emit("drag",h,g)}function B(){return false}function M(){if(!O.dragging){return}var e=E||h;D(e,ue(e))}function Y(){f=false;l(true);s(true)}function A(e){Y();if(!O.dragging){return}var n=E||h;var r=le("clientX",e);var t=le("clientY",e);var i=re(m,r,t);var o=R(i,r,t);if(o&&(E&&C.copySortSource||(!E||o!==g))){D(n,o)}else if(C.removeOnSpill){P()}else{$()}}function D(e,n){var r=ue(e);if(E&&C.copySortSource&&n===g){r.removeChild(h)}if(L(n)){O.emit("cancel",e,g,g)}else{O.emit("drop",e,n,g,x)}I()}function P(){if(!O.dragging){return}var e=E||h;var n=ue(e);if(n){n.removeChild(e)}O.emit(E?"cancel":"remove",e,n,g);I()}function $(e){if(!O.dragging){return}var n=arguments.length>0?e:C.revertOnSpill;var r=E||h;var t=ue(r);var i=L(t);if(i===false&&n){if(E){if(t){t.removeChild(E)}}else{g.insertBefore(r,w)}}if(i||n){O.emit("cancel",r,g,g)}else{O.emit("drop",r,t,g,x)}I()}function I(){var e=E||h;Y();F();if(e){J.rm(e,"gu-transit")}if(t){clearTimeout(t)}O.dragging=false;if(S){O.emit("out",e,S,g)}O.emit("dragend",e);g=h=E=w=x=t=S=null}function L(e,n){var r;if(n!==void 0){r=n}else if(m){r=x}else{r=ce(E||h)}return e===g&&r===w}function R(i,o,a){var u=i;while(u&&!e()){u=ue(u)}return u;function e(){var e=c(u);if(e===false){return false}var n=K(u,i);var r=z(u,n,o,a);var t=L(u,r);if(t){return true}return C.accepts(h,u,g,r)}}function j(e){if(!m){return}e.preventDefault();var n=le("clientX",e);var r=le("clientY",e);var t=n-y;var i=r-b;m.style.top=i+"px";var o=E||h;var a=re(m,n,r);var u=R(a,n,r);var f=u!==null&&u!==S;if(f||u===null){p();S=u;d()}var c=ue(o);if(u===g&&E&&!C.copySortSource){if(c){c.removeChild(o)}return}var l;var s=K(u,a);if(s!==null){l=z(u,s,n,r)}else if(C.revertOnSpill===true&&!E){l=w;u=g}else{if(E&&c){c.removeChild(o)}return}if(l===null&&f||l!==o&&l!==ce(o)){x=l;u.insertBefore(o,l);O.emit("shadow",o,u,g)}function v(e){O.emit(e,o,S,g)}function d(){if(f){v("over")}}function p(){if(S){v("out")}}}function q(e){J.rm(e,"gu-hide")}function U(e){if(O.dragging){J.add(e,"gu-hide")}}function _(){if(m){return}var e=h.getBoundingClientRect();m=h.cloneNode(true);m.style.width=oe(e)+"px";m.style.height=ae(e)+"px";J.rm(m,"gu-transit");J.add(m,"gu-mirror");C.mirrorContainer.appendChild(m);Z(W,"add","mousemove",j);J.add(C.mirrorContainer,"gu-unselectable");O.emit("cloned",m,h,"mirror")}function F(){if(m){J.rm(C.mirrorContainer,"gu-unselectable");Z(W,"remove","mousemove",j);ue(m).removeChild(m);m=null}}function K(e,n){var r=n;while(r!==e&&ue(r)!==e){r=ue(r)}if(r===W){return null}return r}function z(i,n,o,a){var u=C.direction==="horizontal";var e=n!==i?t():r();return e;function r(){var e=i.children.length;var n;var r;var t;for(n=0;n<e;n++){r=i.children[n];t=r.getBoundingClientRect();if(u&&t.left+t.width/2>o){return r}if(!u&&t.top+t.height/2>a){return r}}return null}function t(){var e=n.getBoundingClientRect();if(u){return f(o>e.left+oe(e)/2)}return f(a>e.top+ae(e)/2)}function f(e){return e?ce(n):n}}function H(e,n){return typeof C.copy==="boolean"?C.copy:C.copy(e,n)}}function Z(e,n,r,t){var i={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"};var o={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"};var a={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};if(u.navigator.pointerEnabled){G[n](e,o[r],t)}else if(u.navigator.msPointerEnabled){G[n](e,a[r],t)}else{G[n](e,i[r],t);G[n](e,r,t)}}function ee(e){if(e.touches!==void 0){return e.touches.length}if(e.which!==void 0&&e.which!==0){return e.which}if(e.buttons!==void 0){return e.buttons}var n=e.button;if(n!==void 0){return n&1?1:n&2?3:n&4?2:0}}function ne(e){var n=e.getBoundingClientRect();return{left:n.left+r("scrollLeft","pageXOffset"),top:n.top+r("scrollTop","pageYOffset")}}function r(e,n){if(typeof u[n]!=="undefined"){return u[n]}if(W.clientHeight){return W[e]}return Q.body[e]}function re(e,n,r){var t=e||{};var i=t.className;var o;t.className+=" gu-hide";o=Q.elementFromPoint(n,r);t.className=i;return o}function te(){return false}function ie(){return true}function oe(e){return e.width||e.right-e.left}function ae(e){return e.height||e.bottom-e.top}function ue(e){return e.parentNode===Q?null:e.parentNode}function fe(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.tagName==="SELECT"||n(e)}function n(e){if(!e){return false}if(e.contentEditable==="false"){return false}if(e.contentEditable==="true"){return true}return n(ue(e))}function ce(n){return n.nextElementSibling||e();function e(){var e=n;do{e=e.nextSibling}while(e&&e.nodeType!==1);return e}}function i(e){if(e.targetTouches&&e.targetTouches.length){return e.targetTouches[0]}if(e.changedTouches&&e.changedTouches.length){return e.changedTouches[0]}return e}function le(e,n){var r=i(n);var t={pageX:"clientX",pageY:"clientY"};if(e in t&&!(e in r)&&t[e]in r){e=t[e]}return r[e]}o.exports=e}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./classes":9,"contra/emitter":5,crossvent:6}],11:[function(e,n,r){var t=typeof setImmediate==="function",i;if(t){i=function(e){setImmediate(e)}}else{i=function(e){setTimeout(e,0)}}n.exports=i},{}],12:[function(e,n,r){"use strict";var o=e("atoa");var a=["cancel","cloned","drag","dragend","drop","out","over","remove","shadow","drop-model","remove-model"];function t(n,r,t){a.forEach(e);function e(n){r.drake.on(n,e);function e(){var e=o(arguments).map(i);e.unshift(r.name+"."+n);t.$emit.apply(t,e)}}function i(e){if(n.isElement(e)){return n.element(e)}return e}}n.exports=t},{atoa:3}],13:[function(e,n,r){"use strict";var f=e("dragula");var t="$$dragula";var c=e("./replicate-events");function i(d){return[function e(){return{add:i,find:u,options:r,destroy:n,handleModels:o};function o(t,u){if(u.registered){return}var f;var c;var l;var s;u.on("remove",function e(n,r){if(!u.models){return}s=u.models[u.containers.indexOf(r)];t.$applyAsync(function e(){s.splice(c,1);u.emit("remove-model",n,r)})});u.on("drag",function e(n,r){f=n;c=v(n,r)});u.on("drop",function e(i,o,a){if(!u.models){return}l=v(i,o);t.$applyAsync(function e(){s=u.models[u.containers.indexOf(a)];if(o===a){s.splice(l,0,s.splice(c,1)[0])}else{var n=f===i;var r=u.models[u.containers.indexOf(o)];var t=n?s[c]:d.copy(s[c]);if(n){s.splice(c,1)}r.splice(l,0,t);o.removeChild(i)}u.emit("drop-model",i,o,a)})});u.registered=true}function a(e){var n=e[t];if(!n){n=e[t]={bags:[]}}return n}function v(e,n){return Array.prototype.indexOf.call(d.element(n).children(),e)}function i(e,n,r){var t=u(e,n);if(t){throw new Error('Bag named: "'+n+'" already exists in same angular scope.')}var i=a(e);t={name:n,drake:r};i.bags.push(t);c(d,t,e);if(r.models){o(e,r)}return t}function u(e,n){var r=a(e).bags;for(var t=0;t<r.length;t++){if(r[t].name===n){return r[t]}}}function n(e,n){var r=a(e).bags;var t=u(e,n);var i=r.indexOf(t);r.splice(i,1);t.drake.destroy()}function r(e,n,r){var t=i(e,n,f(r));o(e,t.drake)}}]}n.exports=i},{"./replicate-events":12,dragula:10}]},{},[1])(1)});